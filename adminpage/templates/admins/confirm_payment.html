{% extends "admins/index.html" %} {% block admin_content %}
<!----->

{% load static %}
<link rel="stylesheet" href="{% static 'css/main.css' %}" />
<link
  href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
  rel="stylesheet"
/>
<style>
  .container {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th,
  td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }
  th {
    background-color: #f2f2f2;
  }
  .button {
    background-color: #28a745;
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 5px;
  }
  .button:hover {
    background-color: #218838;
  }
  .disabled {
    background-color: #6c757d;
    cursor: not-allowed;
  }
  .warning {
    color: #dc3545;
  }
</style>

<div class="container">
  <h2>Confirm Cash on Delivery Payments</h2>
  {% if messages %} {% for msg in messages %}
  <!---->
  {% if msg.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
  <div
    class="flex items-center p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800"
    role="alert"
  >
    <svg
      class="shrink-0 inline w-4 h-4 me-3"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="currentColor"
      viewBox="0 0 20 20"
    >
      <path
        d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51  months0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
      />
    </svg>
    <span class="sr-only">Info</span>
    <div><span class="font-medium">{{ msg }}</span></div>
  </div>
  {% elif msg.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
  <div
    class="flex items-center p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800"
    role="alert"
  >
    <svg
      class="shrink-0 inline w-4 h-4 me-3"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="currentColor"
      viewBox="0 0 20 20"
    >
      <path
        d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
      />
    </svg>
    <span class="sr-only">Info</span>
    <div><span class="font-medium">{{ msg }}</span></div>
  </div>
  {% endif %} {% endfor %} {% endif %} {% if cod_orders %}
  <form method="POST">
    {% csrf_token %}
    <table>
      <tr>
        <th>Select</th>
        <th>Order ID</th>
        <th>Customer</th>
        <th>Product</th>
        <th>Quantity</th>
        <th>Total Price</th>
        <th>Address</th>
        <th>Contact</th>
        <th>Status</th>
      </tr>
      {% for order in cod_orders %}
      <tr>
        <td>
          {% if order.payment_status != "Completed" %}
          <input type="checkbox" name="order_ids" value="{{ order.id }}" />
          {% else %}
          <span class="warning">Confirmed</span>
          {% endif %}
        </td>
        <td>{{ order.id }}</td>
        <td>
          {{ order.user.username }} ({{ order.email|default:"Not provided" }})
        </td>
        <td>{{ order.product.product_name }}</td>
        <td>{{ order.quantity }}</td>
        <td>NPR {{ order.total_price }}</td>
        <td>{{ order.address }}</td>
        <td>{{ order.contact_no }}</td>
        <td>{{ order.payment_status }}</td>
      </tr>
      {% endfor %}
    </table>
    <br />
    <button type="submit" class="button">Confirm Selected Payments</button>
  </form>
  {% else %}
  <p class="warning">No Cash on Delivery orders found.</p>
  {% endif %}
  <br />
  <br />
  <p><a href="{% url 'admins' %}" class="button">Back to Admin Panel</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>

<!---->
{% endblock admin_content %}
